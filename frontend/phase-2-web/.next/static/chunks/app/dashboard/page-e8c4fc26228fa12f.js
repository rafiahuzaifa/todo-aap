(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9734:function(e,t,s){Promise.resolve().then(s.bind(s,2107))},2934:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},4369:function(e,t,s){"use strict";var n=s(2265),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=n.useState,r=n.useEffect,i=n.useLayoutEffect,c=n.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!a(e,s)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),n=l({inst:{value:s,getSnapshot:t}}),a=n[0].inst,u=n[1];return i(function(){a.value=s,a.getSnapshot=t,o(a)&&u({inst:a})},[e,s,t]),r(function(){return o(a)&&u({inst:a}),e(function(){o(a)&&u({inst:a})})},[e]),c(s),s};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},2860:function(e,t,s){"use strict";var n=s(2265),a=s(2558),l="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=a.useSyncExternalStore,i=n.useRef,c=n.useEffect,o=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,n,a){var d=i(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var m=r(e,(d=o(function(){function e(e){if(!c){if(c=!0,r=e,e=n(e),void 0!==a&&f.hasValue){var t=f.value;if(a(t,e))return i=t}return i=e}if(t=i,l(r,e))return t;var s=n(e);return void 0!==a&&a(t,s)?(r=e,t):(r=e,i=s)}var r,i,c=!1,o=void 0===s?null:s;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,s,n,a]))[0],d[1]);return c(function(){f.hasValue=!0,f.value=m},[m]),u(m),m}},2558:function(e,t,s){"use strict";e.exports=s(4369)},5195:function(e,t,s){"use strict";e.exports=s(2860)},2107:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return D}});var n=s(7437),a=s(2265),l=s(5475),r=s(4717),i=s(1586),c=s(9820),o=s(279),u=s(2381);function d(e){let{onSubmit:t,isLoading:s}=e,[l,r]=(0,a.useState)({title:"",description:"",priority:"medium"}),i=e=>{let{name:t,value:s}=e.target;r(e=>({...e,[t]:s}))};return(0,n.jsxs)(c.Zb,{children:[(0,n.jsxs)(c.Ol,{children:[(0,n.jsx)(c.ll,{children:"Create Task"}),(0,n.jsx)(c.SZ,{children:"Add a new task to your list"})]}),(0,n.jsx)(c.aY,{children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),null==t||t(l),r({title:"",description:"",priority:"medium"})},className:"space-y-6",children:[(0,n.jsx)(o.II,{label:"Task Title",name:"title",value:l.title,onChange:i,placeholder:"What needs to be done?",required:!0}),(0,n.jsx)(o.gx,{label:"Description",name:"description",value:l.description,onChange:i,placeholder:"Add more details...",rows:4}),(0,n.jsx)(o.Ph,{label:"Priority",name:"priority",value:l.priority,onChange:i,options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}]}),(0,n.jsx)(u.z,{type:"submit",isLoading:s,className:"w-full",children:"Create Task"})]})})]})}var f=s(3448);let m={default:"bg-slate-100 text-slate-700",success:"bg-emerald-50 text-emerald-700",warning:"bg-amber-50 text-amber-700",error:"bg-red-50 text-red-700",info:"bg-blue-50 text-blue-700"};function x(e){let{variant:t="default",children:s,className:a}=e;return(0,n.jsx)("span",{className:(0,f.cn)("inline-flex items-center rounded-full px-3 py-1 text-sm font-medium",m[t],a),children:s})}var g=s(9322),h=s(1723),p=s(2934);let b={pending:{label:"Pending",icon:g.Z,color:"warning"},"in-progress":{label:"In Progress",icon:h.Z,color:"info"},completed:{label:"Completed",icon:p.Z,color:"success"}},v={low:{label:"Low",badge:"default"},medium:{label:"Medium",badge:"warning"},high:{label:"High",badge:"error"}};function y(e){let{title:t,description:s,status:a,priority:l,createdAt:r}=e,i=b[a],o=v[l],u=i.icon;return(0,n.jsxs)(c.Zb,{className:"overflow-hidden transition-all duration-300 hover:shadow-lg",children:[(0,n.jsxs)(c.Ol,{className:"pb-3",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-start justify-between gap-4",children:[(0,n.jsx)(c.ll,{className:"line-clamp-2 text-lg",children:t}),(0,n.jsx)(x,{variant:o.badge,children:o.label})]}),s&&(0,n.jsx)(c.SZ,{className:"line-clamp-2",children:s})]}),(0,n.jsx)(c.aY,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(u,{className:"h-4 w-4 text-slate-400"}),(0,n.jsx)("span",{className:"text-sm font-medium text-slate-600",children:i.label})]}),(0,n.jsx)("span",{className:"text-xs text-slate-500",children:new Date(r).toLocaleDateString()})]})})]})}let j=e=>{let t;let s=new Set,n=(e,n)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=n?n:"object"!=typeof a||null===a)?a:Object.assign({},t,a),s.forEach(s=>s(t,e))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>r,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},r=t=e(n,a,l);return l},k=e=>e?j(e):j;var S=s(5195);let{useDebugValue:w}=a,{useSyncExternalStoreWithSelector:N}=S,E=!1,T=e=>e,C=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?k(e):e,s=(e,s)=>(function(e,t=T,s){s&&!E&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),E=!0);let n=N(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return w(n),n})(t,e,s);return Object.assign(s,t),s},I=e=>e?C(e):C,O=I(e=>({isLoggedIn:!1,user:null,token:null,setAuth:(t,s)=>{localStorage.setItem("access_token",s),e({isLoggedIn:!0,user:t,token:s})},logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),e({isLoggedIn:!1,user:null,token:null})}}));function D(){let{isLoggedIn:e}=O(),t=(0,l.useRouter)(),[s,c]=(0,a.useState)([]),[o,u]=(0,a.useState)(!0),f=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(!f.current){if(!e){f.current=!0,t.replace("/login");return}m()}},[e]);let m=async()=>{try{let n=await fetch("/api/tasks",{credentials:"include"});if(!n.ok){if(401===n.status){var e,s;null===(e=(s=O.getState()).logout)||void 0===e||e.call(s),t.replace("/login");return}throw Error("HTTP ".concat(n.status))}let a=await n.json();c(a.data||a||[])}catch(e){console.error("Failed to fetch tasks:",e)}finally{u(!1)}},x=async e=>{try{let s=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});s.ok?m():401===s.status&&t.replace("/login")}catch(e){console.error("Create task failed:",e)}};return o||!e?(0,n.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[(0,n.jsx)("div",{className:"text-lg font-medium text-slate-600",children:e?"Loading your tasks...":"Checking authentication..."}),!e&&(0,n.jsx)("p",{className:"mt-2 text-sm text-slate-500",children:"Redirecting to login..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h,{}),(0,n.jsx)("main",{className:"flex-1",children:(0,n.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-12 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"mb-12",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-slate-900",children:"Your Tasks"}),(0,n.jsx)("p",{className:"mt-2 text-lg text-slate-600",children:"Manage and organize your daily tasks efficiently"})]}),(0,n.jsxs)("div",{className:"grid gap-8 lg:grid-cols-3",children:[(0,n.jsx)("div",{className:"lg:col-span-1",children:(0,n.jsx)(d,{onSubmit:x})}),(0,n.jsxs)("div",{className:"lg:col-span-2",children:[(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"All Tasks"})}),0===s.length?(0,n.jsx)("div",{className:"rounded-lg border-2 border-dashed border-slate-300 bg-slate-50 p-12 text-center",children:(0,n.jsx)("p",{className:"text-lg text-slate-600",children:"No tasks yet. Create your first task to get started!"})}):(0,n.jsx)("div",{className:"grid gap-4",children:s.map(e=>(0,n.jsx)(y,{title:e.title,description:e.description,status:e.status||"pending",priority:e.priority||"medium",createdAt:e.created_at},e.id))})]})]})]})}),(0,n.jsx)(i.$,{})]})}I(e=>({tasks:[],loading:!1,setTasks:t=>e({tasks:t}),addTask:t=>e(e=>({tasks:[t,...e.tasks]})),updateTask:(t,s)=>e(e=>({tasks:e.tasks.map(e=>e.id===t?{...e,...s}:e)})),deleteTask:t=>e(e=>({tasks:e.tasks.filter(e=>e.id!==t)})),setLoading:t=>e({loading:t})}))}},function(e){e.O(0,[32,126,971,117,744],function(){return e(e.s=9734)}),_N_E=e.O()}]);